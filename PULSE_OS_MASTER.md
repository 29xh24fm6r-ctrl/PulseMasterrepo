# ğŸ§  PULSE OS - Master Document
> **Last Updated:** November 29, 2025  
> **Version:** 3.1 (Founder + Developer Edition)  
> **Status:** Active Development  

---

## ğŸ“š TABLE OF CONTENTS

1. [Vision & Philosophy](#-vision--philosophy)  
2. [Pulse Kernel â€” Core Principles](#-pulse-kernel--core-principles)  
3. [Personalization Engine](#-pulse-personalization-engine)  
4. [Dual-Layer Architecture](#-dual-layer-architecture--how-pulse-thinks)  
5. [Architecture Overview](#-architecture-overview)  
6. [Core Systems](#-core-systems)  
   - [Second Brain & Memory Continuum Engine](#1-second-brain--memory-continuum-engine)  
   - [Confidant Module & Emotional OS](#2-confidant-module--emotional-os)  
   - [Philosophy Dojo & Identity Engine](#3-philosophy-dojo--identity-engine)  
   - [XP Engine & Behavioral Design Layer](#4-xp-engine--behavioral-design-layer)  
   - [Proactive Pulse & Briefings](#5-proactive-pulse--briefings)  
   - [Professional Work Engines (Work OS)](#6-professional-work-engines--work-os)  
7. [Completed Features](#-completed-features)  
8. [Known Issues](#-known-issues)  
9. [Planned Features (Roadmap)](#-planned-features-roadmap)  
10. [Long-Term Evolution](#-long-term-evolution--far-future-roadmap)  
11. [Ideas Inbox](#-ideas-inbox)  
12. [Discussion Log](#-discussion-log)  
13. [File Reference](#-file-reference)  
14. [Environment Variables](#-environment-variables)  
15. [How to Continue Development](#-how-to-continue-development)  
16. [Quick Reference](#-quick-reference)  
17. [How AI Tools Should Use This Doc](#-how-ai-tools-should-use-this-doc)  
18. [Changelog](#-changelog)  

---

## ğŸ¯ VISION & PHILOSOPHY

### What Is Pulse OS?

Pulse OS started with a simple question:

> **"How do I gamify my job and make work fun again?"**

From that spark, Pulse evolved into something much bigger:

> **Pulse OS is an AI-powered Life Operating System** â€” a calm, intelligent layer that runs underneath your entire life, organizing your world, supporting your growth, and making your day-to-day existence dramatically easier, clearer, and more intentional.

Pulse is:

- A **Second Brain** that remembers everything  
- An **Executive Personal Assistant** (Jarvis + Alfred + Moneypenny)  
- A **Professional Work Engine** for your career  
- A **Life Coach & Strategist** that adapts to who you are  
- A **Relationship & Memory System** that tracks people and patterns over time  
- A **Behavioral Psychology Layer** that keeps you moving without feeling like a game  
- A **Continuity Engine** that connects all the pieces of your life  

Pulse is not an app.  
Pulse is the OS your life runs on.

---

### Core Philosophy

> **"Pulse takes all responsibility of remembering off the mind of the user. AI ensures everything gets done. The user never has to worry about forgetting something. Pulse keeps us on task, productive, and growing as humans."**

Expanded:

- The human mind is for **thinking**, not memorizing or tracking  
- Pulse holds **tasks, relationships, commitments, patterns, and goals**  
- Pulse gradually learns **who you are**, not just what you do  
- Pulse's job is to **reduce mental load**, not add to it  

---

### The Mantra

> **"This is not journaling. This is becoming."**

Pulse is not a place to dump information.  
It is a system that:

- Captures your life  
- Reflects it back to you with intelligence  
- Helps you grow into the person you want to become  

---

### The Dream

- **One interface:** Users never need to open Notion, HubSpot, or other tools directly. Pulse sits on top and orchestrates.  
- **AI automation:** Pulse scans, extracts, creates, and manages automatically.  
- **Relationship Oracle:** Deeply understand every person you interact with.  
- **Voice-first interaction:** Talk to Pulse like a real companion.  
- **Zero cognitive load:** Your mind is clear because Pulse has it handled.  
- **Proactive Intelligence:** Pulse reaches out **first**, not just when asked.  
- **Life OS for Everyone:** Executives, parents, salespeople, founders, students â€” Pulse adapts to their world without feeling like a "productivity chore."  

---

## ğŸ§¬ PULSE KERNEL â€” CORE PRINCIPLES

These are the **non-negotiable laws** of how Pulse must behave.

### 1. The No-Chore Rule

> **Pulse must never create work. Pulse only removes work.**

- No double entry. No busywork. No "update your system" homework.  
- Features that make life feel heavier are rejected or redesigned.  
- Every new capability must answer:  
  > "Does this meaningfully lower cognitive load or save time?"

### 2. Integration-First, Not App-First

> **Users should live in their normal tools. Pulse lives underneath.**

- Email, calendar, CRM, phone, docs, notes continue as usual  
- Pulse plugs in via integrations and quietly orchestrates  
- Pulse's primary experience is **conversations + briefings**, not dashboards you babysit  

### 3. Ambient Awareness Over Manual Input

> **Pulse should know as much as possible without being told.**

- Auto-ingest signals from email, calendar, calls, deals, notes  
- Manual input is additive, not required  
- The more a user connects, the lighter their life becomes  

### 4. Calm, Professional, Human-Friendly

> **Pulse is a calm, capable assistant â€” never frantic, never needy.**

- No notification spam  
- No juvenile gamification or loud UI  
- Tone is warm, professional, steady, and supportive  
- Pulse surfaces what matters **right now**, not everything  

### 5. Life OS for Everyone

> **Pulse must be usable by a busy executive, a parent, a creator, or a banker without feeling like a toy.**

- Behavioral design (XP, streaks, progress) is **subtle and adult**  
- Primary experience: *"This makes my life easier, not more complicated."*  

### 6. Identity & Growth Without Overreach

- Pulse helps users become the strongest version of themselves  
- Pulse recommends paths, frameworks, and reflections  
- Pulse *never* makes personal life decisions for the user  

---

## ğŸ§  PULSE PERSONALIZATION ENGINE  
### A Fully Adaptive, Fingerprint-Level Experience

Life is personal â€” your OS should be too.

Every user lives a different life, thinks differently, and needs different support.  
The **Pulse Personalization Engine (PE)** makes each Pulse instance unique.

---

### 1. Purpose of the Personalization Engine

PE exists to:

- Understand the user at a **deep psychological + operational** level  
- Tailor Pulse's **tone, interface, coaching style, and priorities**  
- Load **profession-specific intelligence packs**  
- Adapt to personality, motivations, and behavior patterns  
- Make Pulse feel like it was **built just for this one user**  

No two users should have the same Pulse.

---

### 2. Career & Industry Personalization

Pulse builds a **Career Profile** by asking:

- What is your profession / role?  
- What industry are you in?  
- What does a typical workday look like?  
- What tools do you live in daily (email, CRM, suites)?  
- What does "success" look like in your role?  
- What are your biggest bottlenecks and drains?  
- If you could automate 3 things tomorrow, what would they be?  

Based on this, Pulse loads an **Industry Intelligence Pack** that affects:

- Daily briefings  
- Metrics and dashboards  
- Assistant behavior (what it watches and surfaces)  
- Coaching examples and language  
- Task extraction rules  
- Follow-up detection  
- Relationship tracking and "important people"  
- Deal / project / case models (depending on domain)  

**Example:**  
- Banker â†’ deals, DSCR, SBA, risk, renewals, relationships  
- Lawyer â†’ cases, filings, deadlines, discovery, clients  
- Salesperson â†’ pipeline, touchpoints, prospects, offers  
- Coach/trainer â†’ sessions, clients, programs, adherence  

---

### 3. Personality & Motivation Personalization

Pulse maps the user's **Personality Architecture** using fun, scenario-based questions:

- How do you respond under stress?  
- How do you prefer support (calm guidance, strong direction, encouragement)?  
- What gives you energy? What drains you fastest?  
- Do you prefer big-picture over detail, or vice versa?  
- Do you want Pulse to be highly proactive or mostly on-demand?  
- When you procrastinate, what does it feel like?  
- What kind of language motivates you?

Pulse configures:

- **Tone of Voice:** supportive, executive, calm, energetic, direct, etc.  
- **Coaching Style:** reflective, accountable, strategic, structure-heavy, etc.  
- **Nudge Frequency:** minimal, moderate, or high  
- **Focus Strategies:** gentle prioritization vs. aggressive simplification  
- **Check-in rhythm:** daily / weekly / event-based  

---

### 4. Interface & Workflow Personalization

Pulse adjusts UX around how the user thinks:

- Visual vs. verbal: graphs & tiles vs. summaries & briefs  
- Structured vs. flexible: rigid daily plans vs. light daily guidance  
- Quiet vs. chatty: mostly silent vs. frequent updates  
- Voice-first vs. text-first vs. mixed  

Example options:

- "My ideal Pulse UI isâ€¦"  
  - A calm, minimal dashboard  
  - A tactical command center  
  - A strategic weekly view  
  - A conversational interface with summary cards  

---

### 5. Adaptation Over Time

Pulse continuously refines personalization based on:

- What the user responds to  
- What they ignore  
- When they engage  
- Completion patterns  
- Energy patterns (via health/behavior signals, if enabled)  
- Emotional patterns from journal, calls, and notes  

PE is not a one-time setup. It is a **living model** of the user.

---

## ğŸ§± DUAL-LAYER ARCHITECTURE â€” HOW PULSE THINKS

Pulse is designed as a **dual-layer system**:

1. **Integrated Core Layer** â€” how Pulse actually thinks internally  
2. **Standalone Module Layer** â€” how features are exposed to users and docs  

### Layer 1 â€” Integrated Core (Invisible)

These systems are deeply interwoven:

- **Memory Continuum Engine** â†’ powers Second Brain, Confidant, Relationship Graph, Professional Work Engines  
- **Confidant & Emotional OS** â†’ uses Memory + Journal + Events to support the user emotionally  
- **Philosophy Dojo** â†’ ties into Identity Engine & Behavioral Design to shape habits and character  
- **Identity Engine** â†’ sits above tasks; models "who the user is becoming"  
- **Destiny Engine** â†’ projects current trajectory vs. alternate futures  
- **Behavioral Design Layer** â†’ translates philosophy and goals into micro-behaviors, XP, and rituals  
- **Ambient Awareness Engine** â†’ watches signals and feeds everything upstream  
- **XP Engine** â†’ provides subtle rewards, streaks, and progress; no juvenile game UI  

Internally, all of this behaves as **one mind**.

---

### Layer 2 â€” Standalone Modules (Visible)

To users, each becomes a **clear, named system**:

- ğŸŸ£ **Confidant Module**  
- ğŸ”µ **Memory Continuum Engine**  
- ğŸŸ© **Philosophy Dojo**  
- â¤ï¸ **Emotional OS**  
- ğŸŒŸ **Identity Engine**  
- ğŸ§­ **Destiny Engine**  
- ğŸ› ï¸ **Behavioral Design Layer**  
- ğŸ”— **Relationship Graph**  
- ğŸ’¼ **Professional Work Engines** (Banker, Sales, Founder, etc.)  
- ğŸ§  **Coaching Brain** (Stoicism, Samurai, 7 Habits, etc.)  
- ğŸ’° **Financial Life OS**  
- ğŸ©º **Health & Energy OS**  

This document describes modules individually but they should always be implemented as **connected pieces of a single architecture**.

---

## ğŸ—ï¸ ARCHITECTURE OVERVIEW

### Current Stack

| Component | Technology | Purpose |
|-----------|------------|---------|
| **Frontend** | Next.js 16 + React | Dashboard & UI |
| **Styling** | Tailwind CSS | Beautiful dark theme |
| **Database** | Notion API | Stores all data (contacts, tasks, deals, etc.) |
| **AI Brain** | GitHub Repository | 34+ knowledge modules for Pulse intelligence |
| **AI Chat** | OpenAI GPT-4o-mini | Intelligent conversations |
| **AI Voice** | OpenAI Realtime API | Real-time voice conversations |
| **Speech-to-Text** | OpenAI Whisper | Voice transcription |
| **Text-to-Speech** | OpenAI TTS | Voice responses |
| **Email** | Gmail API | Scan inbox, extract actions |
| **Search** | Brave Search API | Web research for contact intelligence |
| **Hosting** | GitHub Codespaces | Development environment |
| **Auth** | Google OAuth | Gmail connection |
| **Cron Jobs** | cron-job.org | Scheduled background tasks |

---

### Pulse OS Brain (GitHub Repository)

**Repository:** `Pulse-OS-Brain`  
**Purpose:** Stores all AI knowledge modules that define Pulse's personality and capabilities

#### Brain Modules:

| Category | Modules |
|----------|---------|
| **Communication** | communication-patterns.md, conflict-navigation.md, meeting-prep.md |
| **Identity & Emotional** | identity-evolution.md, emotional-stability.md, emotional-pattern-detection.md, confidence-engine.md |
| **Sales & Deals** | deal-coaching.md, crm-pipeline-rules.md, follow-up-engine.md |
| **XP & Habits** | micro-missions.md, habit-recovery.md, daily-rhythm.md, burnout-prevention.md |
| **Voice** | voice-brain.md (natural spoken conversation patterns) |
| **Journal** | journal-reflection-v2.md (adaptive emotional intelligence) |
| **Core** | KERNEL.md (core personality), README.md |

---

### Pulse Integration Layer (PIL)

The **Pulse Integration Layer (PIL)** is how Pulse plugs into the rest of the user's world so that Pulse never becomes a chore or "yet another app to maintain."

PIL lets Pulse:

- **Ingest** data from the tools users already live in  
- **Sync** updates between those tools and Pulse  
- **Act** on that information (create tasks, follow-ups, deals, insights)  
- Maintain **ambient awareness** of what's happening  

#### Key Integration Domains (Now + Future)

**1. Communication**
- Gmail / Outlook / O365  
- Calendar  
- SMS  
- Slack / Teams  
- (Future) WhatsApp + other channels  
- (Future) Pulse VOIP (native softphone)  

**2. Productivity & Notes**
- Notion (primary UI / DB)  
- (Future) Apple Notes, Google Docs, Obsidian, Evernote, etc.  
- (Future) External task managers  

**3. CRM & Work Systems**
- HubSpot (planned backend)  
- (Future) Salesforce, Zoho, domain-specific tools  

**4. Files & Documents**
- Google Drive  
- OneDrive / SharePoint  
- Dropbox  
- PDF / doc parsing  

**5. Life & Health (User-Optional)**
- (Future) Apple Health, Oura, Whoop, etc.  
- (Future) Financial feeds (Plaid)  

---

### Ambient Awareness Engine

On top of PIL, Pulse runs an **Ambient Awareness Engine** that quietly:

- Watches for new tasks, follow-ups, commitments  
- Detects stale deals and cold relationships  
- Sees upcoming meetings and prepares context  
- Tracks streaks, momentum, and burnout signals  
- Feeds everything into the Second Brain and XP Engine  

The user should not feel like they're "feeding Pulse" â€” they just live their life, and Pulse keeps up.

---

### Future Stack (Planned)

| Component | Technology | Purpose |
|-----------|------------|---------|
| **CRM Backend** | HubSpot | Scalable contact/deal management |
| **App Database** | Supabase | User data, XP, settings, preferences |
| **Vector Store** | pgvector | Embeddings for contact & life intelligence |
| **VOIP Layer** | TBD (SIP/CPaaS) | Pulse Phone (native calling + notes) |

---

## ğŸ”© CORE SYSTEMS

### 1. Second Brain & Memory Continuum Engine

**Goal:** Create a **single, unified memory** of the user's life across tools, time, and context.

#### Responsibilities

- Capture and link:
  - Tasks, events, emails, calls, notes  
  - People, companies, relationships  
  - Journals, reflections, emotional states  
  - Deals, projects, goals, habits  
- Maintain **cross-tool identity**:
  - A person in Gmail, Zoom, and Notion is recognized as the same entity  
- Power downstream systems:
  - Confidant
  - Relationship Graph
  - Professional engines
  - Coaching and Destiny Engine

#### Data Sources

- Email (threads, attachments, tasks, relationships)  
- Calendar (events, participants, notes)  
- Notion (tasks, contacts, deals, journal entries)  
- Voice calls & recordings (summaries, action items)  
- Journal & Philosophy Dojo logs  

#### Key Concepts

- **Memory Atoms**: Smallest meaningful units (task, insight, quote, decision, reflection)  
- **Memory Links**: Relations between atoms (person â†” decision, emotion â†” event, habit â†” outcome)  
- **Memory Timelines**: Ordered sequences of key events around a person, project, or life area  
- **Memory Views**: How this is surfaced (deal timeline, relationship history, emotional journey, etc.)

#### Implementation Notes

- Initially backed by **Notion DBs + GitHub text modules**  
- Future: **Supabase + pgvector** for scalable, queryable life memory  
- Must support:
  - ID-based linking across tools  
  - Queries like: "Show me every major decision I made in the last 6 months and how I felt afterward."  

---

### 2. Confidant Module & Emotional OS

This is Pulse as a **safe, steady, memory-aware companion** â€” especially for users struggling with stress, addiction, or emotional overload.

#### Confidant Module

**Goal:** Provide a **consistent emotional presence** that remembers, reflects, and supports over time.

Features:

- **Private Channel** for emotional sharing and confessions  
- **Long-Term Memory** of:
  - Struggles (e.g., alcohol, relationships, shame patterns)  
  - Triggers and stressors  
  - Wins and progress  
- **Contextual Recall**:
  - "Last time you felt this way, this is what helpedâ€¦"  
  - "Here's what you told me you want to do when this pattern shows up again."  

Rules:

- Never judges, never shames  
- Prioritizes **stability, safety, and clarity**  
- Encourages professional help when needed (therapists, doctors, support groups)  
- Can be "turned down" in intensity if user doesn't want heavy emotional work at a given time  

#### Emotional OS

**Goal:** Model and support the user's emotional life.

Capabilities:

- **Emotional Pattern Detection**:
  - Uses journal, Confidant chats, call summaries, behavior patterns  
- **Stress & Crisis Mode**:
  - If signals indicate crisis (language + behavior), switch to calm, practical, grounding responses  
- **Recovery Companion (Addiction & Coping)**:
  - Optional module that:
    - Tracks sobriety streaks or other recovery metrics  
    - Remembers high-risk situations and planned responses  
    - Helps user precommit to strategies when they feel strong  
- **De-escalation Flows**:
  - Breath, body, environment check-ins  
  - Small, actionable next steps  
  - No life overhaul during crisis; only stabilization  

Emotional OS is tightly coupled with:

- Memory Continuum (to remember context)  
- Confidant (for conversational support)  
- Identity Engine (to support "who I'm trying to become")  

---

### 3. Philosophy Dojo & Identity Engine

The **Philosophy Dojo** is where users actually **practice** the philosophies that change lives (Stoicism, Samurai code, 7 Habits, etc.) instead of just reading them.

#### Philosophy Dojo

**Goal:** Turn life philosophies into **trainable skill trees** with belt-like progression.

Concepts:

- **Paths**:
  - ğŸŸ¦ Stoic Path  
  - ğŸ”¥ Samurai Path  
  - ğŸŒ¿ Taoist / Zen Path  
  - ğŸ§­ 7 Habits Path  
  - âš¡ Discipline & Grit Path  
- **Belts / Ranks**:
  - White â†’ Yellow â†’ Orange â†’ Green â†’ Blue â†’ Brown â†’ Black  
- **Micro-Practices**:
  - 30â€“120 second exercises:
    - Stoic reframing  
    - Samurai decisive action  
    - 7 Habits weekly planning  
    - Mindful breathing  
- **Dojo Sessions**:
  - Daily "sparring" against real-life situations:
    - "Here's something that happened today. How would a Stoic respond?"  
    - "What is the Samurai move in this situation?"  

XP & Progress:

- Each practice logs:
  - Path  
  - Skill used  
  - Context (work, family, self)  
  - Outcome  
- XP feeds:
  - Philosophy Path levels  
  - Identity Engine ("I am the kind of person whoâ€¦")  

#### Identity Engine

**Goal:** Help the user **become** who they want to be, not just do more tasks.

Capabilities:

- **Identity Profile**:
  - "Who am I becoming?" (e.g., calm father, lethal closer, disciplined artist)  
- **Identity XP**:
  - Actions are tagged with identity traits they reinforce  
- **Identity Drift Detection**:
  - If behavior consistently contradicts desired identity, Pulse gently calls it out  
- **Identity Statements**:
  - Positive, future-oriented statements the user chooses:
    - "I am a sober, present father."  
    - "I am a calm, deadly-effective professional."  

Integration:

- Dojo â†’ Identity Engine (reinforces chosen traits)  
- Emotional OS â†’ Identity Engine (support during struggle)  
- Destiny Engine â†’ Identity Engine (future projections based on identity alignment)  

---

### 4. XP Engine & Behavioral Design Layer

**Goal:** Make living well feel **rewarding and engaging** without turning life into a cartoon game.

#### XP Engine

Tracks XP in domains:

- Work / Professional  
- Discipline / Habits  
- Health / Energy  
- Relationships / Family  
- Philosophy / Inner Life  

Events that grant XP:

- Completing key tasks  
- Showing up to difficult conversations  
- Practicing Dojo drills  
- Keeping promises to self and others  
- Maintaining streaks (without punishing breaks harshly)

#### Behavioral Design Layer

Tools:

- **Boss of the Day**:
  - One meaningful challenge per day that clearly "moves the needle"  
- **Rituals**:
  - Morning Brief  
  - Pre-Call / Pre-Meeting Focus  
  - Shutdown Ritual  
- **XP Toasts**:
  - Low-key visual confirmations (not loud gamification)  
- **Autonomy Settings**:
  - Auto / Ask First / Suggest Only  

Behavioral design should:

- Nudge, not nag  
- Support, not control  
- Make good behavior feel naturally rewarding  

---

### 5. Proactive Pulse & Briefings

**Goal:** Pulse should reach out **first**, not only respond.

Components:

- **Morning Brief**:
  - Top 3â€“5 priorities  
  - Key meetings + context  
  - Critical follow-ups  
  - Any emotional/energy notes from previous days  
- **After-Call Summaries**:
  - Call â†’ summary â†’ tasks â†’ relationship updates  
- **Follow-Up Detection**:
  - Watches for promises, open loops, and unfulfilled commitments  
- **Weekly Life Briefing** (Planned):
  - Work, health, relationships, philosophy, finances in one view  

Proactive Pulse is powered by:

- Ambient Awareness Engine  
- Memory Continuum  
- XP / Behavioral Design  

---

### 6. Professional Work Engines (Work OS)

**Goal:** Make Pulse feel like the **world's best assistant** for the user's specific job.

Examples:

- **Banker Engine**:
  - Deals, DSCR, covenants, renewals, SBA, risk models  
  - Relationship mapping across borrowers, guarantors, entities  
  - Underwriting workflow + doc collection + exception handling  
- **Sales Engine**:
  - Pipelines, touch patterns, account plans, deal strategy  
- **Founder Engine**:
  - Vision, roadmap, investor pipeline, product priorities  

Each engine includes:

- Domain-specific data models  
- Domain-specific briefings  
- Domain-specific XP hooks (e.g., prospecting XP, underwriting XP)  

---

## âœ… COMPLETED FEATURES

### â° Cron Jobs - Automated Background Tasks
- **Location:** `app/api/cron/` + `app/cron/page.tsx` + `vercel.json`
- **What it does:**
  - **Morning Briefing** (7:00 AM daily) - Generates AI-powered daily summary with tasks, deals, priorities
  - **Midday Scan** (12:00 PM daily) - Checks for overdue tasks, streak risks, stale deals, cold relationships
  - **Evening Scan** (6:00 PM daily) - Final streak risk warnings before end of day
  - **Weekly Review** (Sunday 6:00 PM) - Generates weekly summary with XP, tasks completed, deals won, habit analysis
  - **Cron Dashboard** at `/cron` - Manual trigger and monitoring for all jobs
  - **Security** - CRON_SECRET authentication for all endpoints
- **External Scheduler:** cron-job.org (free tier)
- **Status:** âœ… Working

### ğŸ“Š XP Logging System
- **Location:** `app/api/xp/log/route.ts` + `lib/xp/award.ts`
- **What it does:**
  - **Persistent XP Tracking** - All XP gains saved to Notion database
  - **Auto-awarding** - XP automatically awarded when completing actions:
    - Task completed: +25 DXP (or +40 DXP for high priority)
    - Habit logged: +15 DXP
    - Journal entry: +20 DXP
    - Deal won: +150 AXP
    - Deal advanced: +50 AXP
    - Streak milestones: +50/100/200 MXP
  - **Crit system** - Random chance for 2-4x XP multipliers
  - **Identity bonuses** - Active identities provide XP bonuses
- **Notion Database:** XP Log (ID: 2ba6557d6aaa80ef9475c26f8aa5729d)
- **Status:** âœ… Working

### ğŸ”” Notifications Command Center
- **Location:** `app/notifications/page.tsx` + `app/components/pulse-notifications-widget.tsx`
- **What it does:**
  - **Full notifications page** at `/notifications`
  - **Filter by type** - Tasks, Habits, Deals, Relationships, XP, Celebrations
  - **Priority grouping** - High (red) â†’ Medium (yellow) â†’ Low (green)
  - **Action buttons** - Navigate to page, Log habit, Create follow-up, Mark handled
  - **Search** - Filter insights by text
  - **Dashboard widget** - Quick access to top insights
- **Insight Types:** overdue_tasks, streak_risk, cold_relationship, stale_deal, celebration, momentum, xp_milestone
- **Status:** âœ… Working

### ğŸŒŒ XP Ascension System
- **Location:** `lib/xp/` + `app/xp/page.tsx` + `app/components/xp-ascension-widget.tsx` + `app/api/xp/route.ts`
- **What it does:**
  - **5 Parallel XP Categories:**
    - âš”ï¸ DXP (Discipline) - Habits, tasks, follow-ups, morning routine, focus
    - ğŸ‘‘ PXP (Power) - Negotiations, boundaries, difficult conversations, leadership
    - ğŸ§¬ IXP (Identity) - Stoic moments, emotional mastery, integrity, father moments
    - ğŸ† AXP (Achievement) - Deals won, systems built, milestones, loans funded
    - ğŸ”¥ MXP (Momentum) - Streaks, consistency, no-zero days, daily targets
  - **Ascension Level** - Combined level from all 5 categories (can't min-max!)
  - **8 Identity Types** with resonance tracking:
    - Stoic, Samurai, Builder, Father, Warrior, Strategist, Leader, Creator
    - Each has XP bonuses and special abilities when activated (500+ resonance)
  - **25 Unlockable Skills** across 5 skill trees (unlock at levels 3/5/7/10/15)
  - **Crit Windows** - 2-4x XP multipliers for decisive actions
  - **Dashboard Widget** - Shows all 5 XP bars, Ascension Level, active identity
  - **Full /xp Page** - Overview, Skills, and Identity tabs
- **Ascension Titles:**
  - 1-2: Awakened | 3-4: Initiate | 5-6: Apprentice | 7-9: Adept | 10-14: Warrior
  - 15-19: Veteran | 20-24: Commander | 25-29: Champion | 30-39: Master
  - 40-49: Legendary | 50+: Transcendent
- **Status:** âœ… Working

### ğŸ”” Proactive Pulse System
- **Location:** `app/api/pulse/proactive/route.ts` + `app/components/pulse-insights-widget.tsx`
- **What it does:**
  - **Proactive Scanner** detects 5 types of insights:
    - ğŸ“‹ Overdue Tasks - High priority items past due date
    - ğŸ”¥ Streak Risks - Habits with streaks â‰¥3 not completed today (after 6pm)
    - ğŸ‘¤ Cold Relationships - Contacts not contacted in 14+ days
    - ğŸ’° Stale Deals - Active deals with no activity in 10+ days
    - ğŸ‰ Celebrations - Streak milestones (7/14/21/30/50/100 days), task momentum
  - **Dashboard Widget** - "Pulse Noticed" card showing top insights with actions
  - **Voice Integration** - Pulse greets you with proactive insights when connecting!
  - Auto-refreshes every 5 minutes
- **Status:** âœ… Working

### ğŸ¤ Real-Time Voice System
- **Location:** `app/voice/page.tsx` + `app/api/realtime/session/route.ts`
- **What it does:**
  - Real-time voice conversations using OpenAI Realtime API
  - Sub-500ms latency - feels like talking to a real person
  - Voice Activity Detection (VAD) - knows when you're done speaking
  - Natural interruption - cut Pulse off mid-sentence
  - Streaming responses - Pulse starts speaking before finishing thinking
  - Animated Pulse Face with emotional expressions
  - **Proactive Greetings** - Pulse speaks first with relevant insights!
- **Voice Options:** alloy, ash, ballad, coral, echo, sage, shimmer, verse, marin, cedar
- **Status:** âœ… Working

### ğŸ™ï¸ Global Voice Button
- **Location:** `app/components/global-voice-button.tsx` + `app/layout.tsx`
- **What it does:**
  - Floating mic button on every page (bottom-right corner)
  - Tap to open Pulse voice widget
  - Voice conversation without leaving current page
  - Compact floating widget design
  - Audio visualization and Pulse face
  - **Proactive insight display** when connecting
- **Status:** âœ… Working

### ğŸ˜Š Pulse Face (Animated Avatar)
- **Location:** Embedded in voice components
- **What it does:**
  - 11 emotional expressions (neutral, listening, thinking, happy, excited, empathetic, concerned, serious, determined, sad, surprised)
  - Natural blinking animation
  - Mouth animation when speaking
  - Glow effects based on state
  - Responds to audio levels
  - Cheek blush for happy/excited states
  - Tear animation for sad state
  - Sparkles for excited state
- **Status:** âœ… Working

### ğŸ““ Journal System (Voice + Text)
- **Location:** `app/journal/page.tsx` + `app/api/journal/chat/route.ts`
- **What it does:**
  - **3 Journaling Modes:**
    - ğŸŒŠ Free Flow - User talks freely, Pulse listens
    - ğŸ§­ Guided Reflection - Pulse asks thought-provoking questions
    - âš¡ Quick Check-in - 2-3 minute essential capture
  - **Voice Input** - Mic button to switch from typing to speaking
  - **Adaptive Intelligence** - Not static questions, but infinite adaptive conversation
  - **Emotional Intelligence** - Reads and responds to user's emotional state
  - **Day Summary Card** - Shows tasks completed, habits done, deals progressed
  - **Auto-Extraction** - AI extracts themes, wins, challenges, lessons on save
  - **Streak Tracking** - Reflection streak with XP rewards
  - **Saves to Notion** - Full transcript + extracted insights
  - **Awards XP** - +20 DXP for each journal entry
- **Notion Database:** Journal (with properties: Date, Mode, Mood, Primary Theme, Wins, Challenges, Gratitude, Lessons, Tomorrow Focus, XP Earned, Reflection Streak)
- **Status:** âœ… Working

### ğŸ’¬ Pulse Chat
- **Location:** `app/pulse/page.tsx` + `app/api/pulse/chat/route.ts`
- **What it does:**
  - Intelligent AI chat interface
  - Loads brain modules from GitHub repository
  - Context-aware responses
  - Dynamic option buttons for user choices
  - Warm, supportive conversation style
- **Status:** âœ… Working

### ğŸ§  Pulse AI - Autonomous Email Processor
- **Location:** `app/pulse-ai/page.tsx` + `app/api/pulse/autonomous/route.ts`
- **What it does:**
  - Scans Gmail inbox automatically
  - 4-layer smart filtering (blocks junk, marketing, automated emails)
  - AI extracts tasks, follow-ups, commitments, waiting-on items
  - Auto-creates everything in Notion (no approval needed)
  - Duplicate detection prevents creating same item twice
- **Status:** âœ… Working

### ğŸŒ… Morning Brief - AI Daily Summary
- **Location:** `app/morning/page.tsx` + `app/api/morning-briefing/route.ts`
- **What it does:**
  - AI-generated personalized daily summary
  - Shows overdue tasks, due today, tomorrow preview
  - Highlights stale deals, cooling relationships
  - Quick stats dashboard
  - Focus 3 priorities
  - XP progress tracking
- **Status:** âœ… Working

### â° Auto-Scan Scheduler
- **Location:** `app/lib/auto-scan-scheduler.ts`
- **What it does:**
  - Automatically scans emails every 4 hours
  - Runs on Morning Brief page load if needed
  - Background scanning while tab is open (every 30 min check)
  - Tracks last scan time in localStorage
  - Shows status bar with next scan countdown
- **Status:** âœ… Working

### ğŸ“§ Email Intelligence Scanner
- **Location:** `app/email-intelligence/page.tsx` + `app/api/gmail/email-intelligence/route.ts`
- **What it does:**
  - One scan finds contacts AND actions
  - AI classifies real people vs marketing
  - Duplicate detection for contacts
  - Manual review & approval workflow
  - Tabbed interface (Actions, Contacts, Duplicates, Filtered)
  - Optimized for speed (50 emails, batch size 10)
- **Status:** âœ… Working

### âš¡ Follow-Ups Command Center
- **Location:** `app/follow-ups/page.tsx` + `app/api/follow-ups/pull/route.ts`
- **What it does:**
  - Unified view of Tasks + Follow-Ups from Notion
  - Shows overdue, due today, pending items
  - Gmail connection for email scanning
  - Links to Email Intelligence
- **Status:** âœ… Working

### ğŸ  Dashboard
- **Location:** `app/page.tsx`
- **What it does:**
  - Central hub for Pulse OS
  - **Full Navigation Bar** - Morning Brief, Journal, Follow-Ups, Email Intel, Pulse AI, Oracle, Chat, Deals, Tasks, Habits, Contacts, Cron
  - **XP Ascension Widget** - Shows all 5 XP categories, Ascension Level, active identity
  - **Proactive Insights Widget** - "Pulse Noticed" with actionable insights
  - Hot Deals, Tasks Due, Habits, Recent Contacts widgets
  - Recent Activity log with XP rewards
  - Quick action buttons (Talk to Pulse, Morning Brief, Journal, XP & Skills, Email Intel, Notifications)
  - Header with notifications bell, refresh, settings, Talk to Pulse button
- **Status:** âœ… Working

### ğŸ”® Relationship Intelligence Oracle
- **Location:** `app/intelligence/page.tsx` + `app/api/intelligence/route.ts`
- **What it does:**
  - Multi-platform deep scan (LinkedIn, Twitter, YouTube, GitHub, Medium, Podcasts, News)
  - AI psychological/professional profiling
  - Industry intelligence (trends, disruptions, competitors)
  - Conversation scripts (openers, follow-ups, closings)
  - Pre-call briefing generator
  - Copy-paste conversation lines
- **Status:** âœ… Working

### ğŸ“Š Other Working Features

| Feature | Location | Description |
|---------|----------|-------------|
| Deals Pipeline | `app/deals/` | Track sales deals |
| Tasks | `app/tasks/` | Task management with completion + XP |
| Habits | `app/habits/` | Habit tracking with streaks + XP |
| Second Brain | `app/second-brain/` | Contact/people database |
| Identity | `app/identity/` | Identity alignment tracking |
| Live Coach | `app/live-coach/` | Real-time coaching |
| Call Coach | `app/call-coach/` | Call preparation & coaching |
| Pulse Capture | `app/pulse-capture/` | Quick capture notes/ideas |
| Smart Notifications | `app/components/SmartNotifications.tsx` | Browser alerts |
| Quick Create FAB | `app/components/QuickCreateFAB.tsx` | Floating + button |

---

## ğŸš§ KNOWN ISSUES

| Issue | Description | Priority | Status |
|-------|-------------|----------|--------|
| ~~XP Level NaN~~ | ~~XP system showing "Level NaN" on dashboard~~ | ~~Medium~~ | âœ… FIXED |
| ~~API 404s~~ | ~~Deals/Tasks/Habits/Contacts endpoints returning 404~~ | ~~High~~ | âœ… FIXED |
| ~~Morning Page Crash~~ | ~~focus3.map error on morning page~~ | ~~High~~ | âœ… FIXED |
| ~~Email Scanner Timeout~~ | ~~100s timeout causing empty response~~ | ~~High~~ | âœ… FIXED |
| Codespaces URL Changes | Cron job URLs need updating when Codespace restarts | Low | Open (deploy to Vercel for permanent fix) |
| Notion Field Brittleness | Some Notion fields are hard-coded or assume specific property types | Medium | Open |
| Voice Error Handling | Minimal error handling in voice flows | Low | Open |
| XP Event Consistency | XP events not consistently logged across all actions | Medium | Open |
| Proactive Pulse Sensitivity | Rules can be over- or under-sensitive | Low | Open |

---

## ğŸ“‹ PLANNED FEATURES (ROADMAP)

### Priority 1 â€” Voice & Communication

| Feature | Description | Complexity |
|---------|-------------|------------|
| ğŸ¤ Voice Commands | "Create a task...", "Update the deal...", "Log a habit" | Medium |
| ğŸ¤ Voice in Chat | Mic button for /pulse chat | Low |
| â˜ï¸ Pulse VOIP v1 | Outbound + inbound calling inside Pulse, human-entered notes | High |
| â˜ï¸ VOIP + Legal | Consent prompts, call metadata, safe note capture | High |
| ğŸ“ Call Intelligence Agent | After-call summaries, tasks, CRM updates, relationship graph links | High |

---

### Priority 2 â€” Journal, Growth & Coaching

| Feature | Description | Complexity |
|---------|-------------|------------|
| ğŸ“– Journal History | View/filter past reflections, themes, moods | Low |
| ğŸ“ˆ Growth Analytics | Track emotional + behavioral patterns over time | Medium |
| ğŸŒ™ Shutdown Ritual | End-of-day voice ritual (wins, regrets, tomorrow focus) | Medium |
| ğŸ§­ Coaching Brain v1 | Integrate top coaching frameworks (Stoicism, 7 Habits, Atomic Habits, etc.) | Medium |

---

### Priority 3 â€” Core Intelligence & Integration

| Feature | Description | Complexity |
|---------|-------------|------------|
| ğŸ•µï¸ Contact Oracle v2 | Deeper public web & social profiling | Medium |
| ğŸ“… Calendar Integration | Auto-prep before meetings, post-call summaries | Medium |
| ğŸ”Œ Integration Packs | Additional CRMs, notes apps, task tools | High |
| ğŸŒ Ambient Awareness v2 | Higher-level pattern detection (burnout, momentum) | High |

---

### Priority 4 â€” Proactive Pulse Phase 2

| Feature | Description | Complexity |
|---------|-------------|------------|
| ğŸ”” Push Notifications | Proactive alerts via browser/mobile | Medium |
| âš™ï¸ Autonomy Settings UI | Control autonomy (Auto / Ask First / Suggest Only) | Medium |
| ğŸ¨ XP Toasts | Subtle visual pop-ups for XP & streak events | Low |
| ğŸ“† Weekly Life Briefing | Whole-life summary (work, health, relationships) | Medium |

---

### Priority 5 â€” Platform Evolution

| Feature | Description | Complexity |
|---------|-------------|------------|
| ğŸ¢ HubSpot Migration | Move CRM from Notion to HubSpot backend | High |
| ğŸ’¾ Supabase DB | App DB for multi-user, multi-device | High |
| ğŸ“± Mobile App | Native / hybrid app for phone usage | High |
| ğŸ‘¥ Multi-User | Team features, shared dashboards/scoreboards | High |

---

## ğŸŒŒ LONG-TERM EVOLUTION â€” "FAR FUTURE" ROADMAP

These are the **big systems** that take Pulse from powerful to truly world-changing.

### 1. Identity Engine

- Identity Graph â€” models who the user is becoming  
- Tracks beliefs, self-image patterns, strengths & weaknesses  
- Identity XP â€” leveling up *self*, not just actions  
- Identity Drift Detection â€” catches misalignment early  
- Identity Rewrite Protocols â€” repeated, gentle nudges toward chosen identity  

### 2. Destiny Engine

- Long-term trajectory modeling based on habits, choices, and patterns  
- "If you continue like this, here's where you'll be in 1/3/5 years"  
- "If you make these changes, here's your alternate path"  
- Goal prioritization: what actually matters  

### 3. Emotional OS (Expanded)

- Emotional pattern recognition from journal, behavior, and calls  
- Stress/overwhelm detection and de-escalation flows  
- Crisis mode: calm, stabilizing, practical support  
- Addiction & recovery module (optional, opt-in)  

### 4. Relationship Graph

- Full map of everyone in the user's life  
- Strength of connection, trust, tension levels (over time)  
- Drift detection: relationships cooling or at risk  
- Parenting & family modules (support for fatherhood, etc.)  

### 5. Behavioral Design Layer (Subtle Gamification)

- XP and streaks as **behavioral activation**, not "gaming"  
- Skill trees (Stoic skills, leadership skills, focus skills)  
- Daily "boss" â€” one meaningful challenge per day  
- Rituals: Morning, Pre-Call, Pre-Meeting, Shutdown  

### 6. Health & Fitness OS

- Optional integration with health data (sleep, steps, HRV)  
- Energy-aware scheduling and recommendations  
- Fitness and routine tracking as part of Discipline XP  

### 7. Financial Life OS

- Budget + cashflow modeling  
- Big decision sandbox (moves, job changes, major spends)  
- Wealth-building quests and XP  
- "Freedom scenarios" (e.g., moving, leaving, starting over)  

---

## ğŸ’¡ IDEAS INBOX

*Raw ideas to discuss and refine. Add anything here!*

- [ ] Voice note capture that transcribes and creates tasks
- [ ] Relationship temperature tracking (hot/warm/cold)
- [ ] Auto-detect email replies and update follow-up status
- [ ] Weekly review automation
- [ ] Deal risk scoring based on activity patterns
- [ ] Meeting notes â†’ automatic task extraction
- [ ] Slack integration for team notifications
- [ ] Chrome extension for quick capture from anywhere
- [ ] Enable response and messaging through text messaging including capturing text messages into the second brain
- [ ] Build exercises into Pulse specifically designed to help with growth (patience, stoicism, habits)
- [ ] Role play capability for communication practice (sales, leadership, speaking) with feedback and historical tracking
- [ ] Morning Brief with Voice - spoken daily briefing
- [ ] Deal Coach - voice coaching for sales calls
- [ ] Voice journaling as 4th journal mode option
- [ ] Pulse will access second brain at all times, capable of bringing up any data or information or insight into the conversation, even if it is referencing downloaded information sources like news articles, YouTube shows or anything else.
- [ ] Boss Fights - Weekly high-impact challenges (hard conversation, avoided deal, delayed decision)
- [ ] Prestige Classes at Ascension Level 20+ (Loan Samurai, Pipeline Warlord, Stoic Commander, etc.)
- [ ] XP animations and sound effects for level ups
- [ ] Destiny Engine v1 (trajectory projections)
- [ ] Identity Engine v1 (identity statements + XP)
- [ ] Emotional OS v1.5 (better crisis detection)
- [ ] Fatherhood Module (support for being a present, powerful dad)
- [ ] Samurai Decision Protocol (for high-stakes choices)
- [ ] Work Archetypes (Closer, Builder, Strategist, Guardian)
- [ ] Philosophy Dojo v1 (Stoic/Samurai/7 Habits paths with belt progression)
- [ ] Confidant Module v1 (safe emotional companion with long-term memory)
- [ ] Memory Continuum v1 (cross-tool identity linking)

---

## ğŸ’¬ DISCUSSION LOG

### November 29, 2025 - v3.1 Core Systems & Dual-Layer Architecture
**Topic:** Comprehensive system design for Life OS
**What was defined:**
- Dual-Layer Architecture (Integrated Core + Standalone Modules)
- Memory Continuum Engine specs
- Confidant Module & Emotional OS specs
- Philosophy Dojo with belt progression
- Identity Engine with drift detection
- Professional Work Engines (Banker, Sales, Founder)
- How AI tools should use this document

### November 29, 2025 - Cron Jobs, XP Logging & v3.0 Vision
**Topic:** Automated background tasks, persistent XP tracking, and vision upgrade
**What was built:**
- Cron job system with 4 scheduled tasks (morning, midday, evening, weekly)
- Cron dashboard page at `/cron` for manual testing
- XP Log Notion database for persistent tracking
- XP awarding functions integrated into action routes (tasks, habits, journal, deals)
- Fixed API 404 errors by creating `/api/notion/*` routes
- Fixed morning page crash (focus3 undefined)
- Fixed email intelligence timeout (reduced to 50 emails, batch size 10)
- Updated dashboard with full navigation bar
- Upgraded Master Document to v3.0 with Life OS vision, Kernel principles, Personalization Engine
**Technical Notes:**
- Cron jobs use cron-job.org (free external scheduler)
- CRON_SECRET env variable for authentication
- vercel.json configured for Vercel deployment
- XP_LOG_DB env variable for Notion XP database

### November 27, 2025 - XP Ascension System Implementation
**Topic:** Complete overhaul of XP system with multi-layer gamification
**What was built:**
- 5 parallel XP categories that all feed into Ascension Level
- 8 Identity types with resonance tracking and XP bonuses
- 25 skills across 5 skill trees
- Crit window system for decisive action multipliers
- Full dashboard widget and /xp page
**Technical Notes:**
- XP calculated from Notion data (habits, tasks, deals) or dedicated XP Log DB
- Leveling uses exponential curve: Level n requires 100 * 1.5^(n-2) XP
- Identity activates at 500+ resonance
- Files: lib/xp/types.ts, lib/xp/engine.ts, app/api/xp/route.ts, app/components/xp-ascension-widget.tsx, app/xp/page.tsx

### November 26, 2025 - Proactive Pulse Implementation
**Topic:** Making Pulse proactive instead of reactive
**What was built:**
- Proactive scanner with 5 insight types
- Dashboard widget showing insights
- Voice integration - Pulse greets with insights
**Technical Notes:**
- Scanner queries Notion for overdue tasks, streak risks, cold relationships, stale deals
- Had to handle Notion property type differences (Status vs Select)
- Voice greeting sends system context + triggers response

### November 26, 2025 - Voice & Journal Implementation
**Topic:** Building real-time voice interface and journal system
**Decisions:**
- Used OpenAI Realtime API for true real-time voice (sub-500ms latency)
- Created animated Pulse Face with 11 emotional expressions
- Built journal with 3 modes + voice input option
- Global voice button on every page (floating widget, not full screen)
- Voice in journal allows switching between text and speech

**Technical Notes:**
- Realtime API uses WebRTC for streaming audio both directions
- Voice options: shimmer (default), coral, ash, sage recommended
- Journal saves full transcript + AI-extracted insights to Notion
- Face component embedded in pages to avoid import path issues

### November 24, 2025 - Architecture Discussion
**Topic:** Notion character limits causing issues
**Decision:** Plan to move to GitHub (engine storage) + HubSpot (CRM) + Supabase (app data)
**Reasoning:** Notion has 2,000 character limits. GitHub has none. This future-proofs Pulse for scaling.
**Current approach:** Keep building on Notion for now, migrate later when ready.

### November 24, 2025 - Intelligence Feature Clarification
**Topic:** What should "Intel" button do?
**Decision:** Build Relationship Oracle - not just email scanning, but deep understanding of contacts
**Goal:** Predict what contacts are thinking, communicate effectively, anticipate needs

---

## ğŸ“ FILE REFERENCE

### App Pages (Frontend)
```
app/
â”œâ”€â”€ page.tsx                    # Main Dashboard (with full nav + XP widget)
â”œâ”€â”€ cron/
â”‚   â””â”€â”€ page.tsx               # Cron Jobs Dashboard
â”œâ”€â”€ notifications/
â”‚   â””â”€â”€ page.tsx               # Notifications Command Center
â”œâ”€â”€ xp/
â”‚   â””â”€â”€ page.tsx               # XP Ascension Page (Overview, Skills, Identity tabs)
â”œâ”€â”€ morning/
â”‚   â””â”€â”€ page.tsx               # Morning Brief (AI summary)
â”œâ”€â”€ pulse/
â”‚   â””â”€â”€ page.tsx               # Pulse Chat (intelligent conversation)
â”œâ”€â”€ pulse-ai/
â”‚   â””â”€â”€ page.tsx               # Pulse AI (autonomous processor)
â”œâ”€â”€ voice/
â”‚   â””â”€â”€ page.tsx               # Voice Conversation (realtime + proactive greetings)
â”œâ”€â”€ journal/
â”‚   â””â”€â”€ page.tsx               # Journal (3 modes + voice)
â”œâ”€â”€ follow-ups/
â”‚   â””â”€â”€ page.tsx               # Follow-Ups Command Center
â”œâ”€â”€ email-intelligence/
â”‚   â””â”€â”€ page.tsx               # Email Intelligence Scanner
â”œâ”€â”€ intelligence/
â”‚   â””â”€â”€ page.tsx               # Relationship Oracle
â”œâ”€â”€ deals/
â”‚   â””â”€â”€ page.tsx               # Deal Pipeline
â”œâ”€â”€ tasks/
â”‚   â””â”€â”€ page.tsx               # Tasks
â”œâ”€â”€ habits/
â”‚   â””â”€â”€ page.tsx               # Habits
â”œâ”€â”€ second-brain/
â”‚   â””â”€â”€ page.tsx               # Contacts/People
â”œâ”€â”€ live-coach/
â”‚   â””â”€â”€ page.tsx               # Live Coaching
â”œâ”€â”€ call-coach/
â”‚   â””â”€â”€ page.tsx               # Call Coaching
â”œâ”€â”€ pulse-capture/
â”‚   â””â”€â”€ page.tsx               # Quick Capture
â””â”€â”€ settings/
    â””â”€â”€ page.tsx               # Settings
```

### API Routes (Backend)
```
app/api/
â”œâ”€â”€ cron/
â”‚   â”œâ”€â”€ daily/
â”‚   â”‚   â””â”€â”€ route.ts           # Daily proactive scan
â”‚   â”œâ”€â”€ morning/
â”‚   â”‚   â””â”€â”€ route.ts           # Morning briefing generator
â”‚   â””â”€â”€ weekly/
â”‚       â””â”€â”€ route.ts           # Weekly review generator
â”œâ”€â”€ xp/
â”‚   â”œâ”€â”€ route.ts               # XP Ascension API (GET state, POST award XP)
â”‚   â””â”€â”€ log/
â”‚       â””â”€â”€ route.ts           # XP Log API (GET/POST to Notion)
â”œâ”€â”€ notion/
â”‚   â”œâ”€â”€ tasks/
â”‚   â”‚   â””â”€â”€ route.ts           # Fetch tasks from Notion
â”‚   â”œâ”€â”€ deals/
â”‚   â”‚   â””â”€â”€ route.ts           # Fetch deals from Notion
â”‚   â”œâ”€â”€ habits/
â”‚   â”‚   â””â”€â”€ route.ts           # Fetch habits from Notion
â”‚   â””â”€â”€ contacts/
â”‚       â””â”€â”€ route.ts           # Fetch contacts from Notion
â”œâ”€â”€ pulse/
â”‚   â”œâ”€â”€ proactive/
â”‚   â”‚   â””â”€â”€ route.ts           # Proactive scanner API
â”‚   â”œâ”€â”€ chat/
â”‚   â”‚   â””â”€â”€ route.ts           # Pulse chat API
â”‚   â””â”€â”€ autonomous/
â”‚       â””â”€â”€ route.ts           # Autonomous email processor
â”œâ”€â”€ morning-briefing/
â”‚   â””â”€â”€ route.ts               # Generate AI morning brief
â”œâ”€â”€ realtime/
â”‚   â””â”€â”€ session/
â”‚       â””â”€â”€ route.ts           # OpenAI Realtime session token
â”œâ”€â”€ voice/
â”‚   â””â”€â”€ route.ts               # Speech-to-text & text-to-speech
â”œâ”€â”€ journal/
â”‚   â”œâ”€â”€ chat/
â”‚   â”‚   â””â”€â”€ route.ts           # Journal conversation + save
â”‚   â””â”€â”€ save/
â”‚       â””â”€â”€ route.ts           # Save journal with XP
â”œâ”€â”€ gmail/
â”‚   â”œâ”€â”€ email-intelligence/
â”‚   â”‚   â””â”€â”€ route.ts           # Email scanner API
â”‚   â””â”€â”€ create-action/
â”‚       â””â”€â”€ route.ts           # Create task/follow-up from email
â”œâ”€â”€ follow-ups/
â”‚   â””â”€â”€ pull/
â”‚       â””â”€â”€ route.ts           # Fetch follow-ups from Notion
â”œâ”€â”€ tasks/
â”‚   â”œâ”€â”€ pull/
â”‚   â”‚   â””â”€â”€ route.ts           # Fetch tasks from Notion
â”‚   â””â”€â”€ complete/
â”‚       â””â”€â”€ route.ts           # Complete task + award XP
â”œâ”€â”€ deals/
â”‚   â”œâ”€â”€ pull/
â”‚   â”‚   â””â”€â”€ route.ts           # Fetch deals from Notion
â”‚   â””â”€â”€ update-status/
â”‚       â””â”€â”€ route.ts           # Update deal status + award XP
â”œâ”€â”€ habits/
â”‚   â”œâ”€â”€ pull/
â”‚   â”‚   â””â”€â”€ route.ts           # Fetch habits from Notion
â”‚   â””â”€â”€ log/
â”‚       â””â”€â”€ route.ts           # Log habit completion + award XP
â”œâ”€â”€ second-brain/
â”‚   â”œâ”€â”€ pull/
â”‚   â”‚   â””â”€â”€ route.ts           # Fetch contacts from Notion
â”‚   â””â”€â”€ create-from-email/
â”‚       â””â”€â”€ route.ts           # Create contact from email
â”œâ”€â”€ identity/
â”‚   â””â”€â”€ alignment/
â”‚       â””â”€â”€ route.ts           # Identity alignment data
â””â”€â”€ notifications/
    â””â”€â”€ route.ts               # Smart notifications
```

### Components
```
app/components/
â”œâ”€â”€ xp-ascension-widget.tsx    # XP Ascension dashboard widget (full/compact/mini)
â”œâ”€â”€ pulse-insights-widget.tsx  # Proactive insights widget
â”œâ”€â”€ pulse-notifications-widget.tsx  # Notifications widget
â”œâ”€â”€ global-voice-button.tsx    # Floating voice button (every page)
â”œâ”€â”€ pulse-face.tsx             # Animated Pulse avatar
â”œâ”€â”€ SmartNotifications.tsx     # Notification system
â”œâ”€â”€ QuickCreateFAB.tsx         # Floating + create button
â””â”€â”€ CreateModal.tsx            # Create task/deal/contact modal
```

### XP Engine (Library)
```
lib/xp/
â”œâ”€â”€ types.ts                   # XP categories, identities, skills, activity mapping
â”œâ”€â”€ engine.ts                  # Core XP calculation, leveling, resonance, crits
â””â”€â”€ award.ts                   # XP awarding helper functions
```

### Utilities
```
app/lib/
â”œâ”€â”€ gmail-storage.ts           # Gmail token management
â”œâ”€â”€ gmail-utils.ts             # Gmail helper functions
â”œâ”€â”€ auto-scan-scheduler.ts     # Auto-scan timing logic
â”œâ”€â”€ brain-loader.ts            # Load brain modules from GitHub
â”œâ”€â”€ notion.ts                  # Notion client
â””â”€â”€ notion-utils.ts            # Notion helper functions
```

### Configuration Files
```
/
â”œâ”€â”€ vercel.json                # Vercel cron job configuration
â”œâ”€â”€ package.json               # Dependencies
â”œâ”€â”€ next.config.js             # Next.js configuration
â””â”€â”€ .env.local                 # Environment variables
```

### GitHub Brain Repository
```
Pulse-OS-Brain/
â”œâ”€â”€ KERNEL.md                  # Core personality
â”œâ”€â”€ README.md                  # Repository overview
â”œâ”€â”€ Journal-reflection v2.md   # Journal adaptive intelligence
â”œâ”€â”€ voice-brain.md             # Voice conversation patterns
â”œâ”€â”€ burnout-prevention.md      # Burnout detection & recovery
â”œâ”€â”€ communication-patterns.md  # Communication intelligence
â”œâ”€â”€ confidence-engine.md       # Confidence building
â”œâ”€â”€ conflict-navigation.md     # Conflict resolution
â”œâ”€â”€ creativity-vision.md       # Creative thinking
â”œâ”€â”€ crm-pipeline-rules.md      # CRM/sales pipeline
â”œâ”€â”€ daily-rhythm.md            # Daily routine optimization
â”œâ”€â”€ data-structures.md         # Data organization
â”œâ”€â”€ deal-coaching.md           # Deal/sales coaching
â”œâ”€â”€ emotional-pattern-detection.md  # Emotion detection
â”œâ”€â”€ emotional-stability.md     # Emotional regulation
â”œâ”€â”€ follow-up-engine.md        # Follow-up management
â”œâ”€â”€ habit-recovery.md          # Habit building
â”œâ”€â”€ identity-evolution.md      # Identity growth
â”œâ”€â”€ life-navigation.md         # Life decisions
â”œâ”€â”€ meeting-prep.md            # Meeting preparation
â”œâ”€â”€ micro-missions.md          # Small actionable tasks
â””â”€â”€ ... (34+ modules total)
```

---

## ğŸ”§ ENVIRONMENT VARIABLES

Required in `.env.local`:
```
# Notion
NOTION_API_KEY=
NOTION_DATABASE_TASKS=
NOTION_DATABASE_FOLLOW_UPS=
NOTION_DATABASE_DEALS=
NOTION_DATABASE_HABITS=
NOTION_DATABASE_XP=
NOTION_DATABASE_IDENTITY=
NOTION_DATABASE_SECOND_BRAIN=
NOTION_DATABASE_KNOWLEDGE_BASE=
NOTION_JOURNAL_DB=

# XP Log Database
XP_LOG_DB=2ba6557d6aaa80ef9475c26f8aa5729d

# AI
OPENAI_API_KEY=

# Search
BRAVE_SEARCH_API_KEY=

# Google/Gmail
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=
GOOGLE_REDIRECT_URI=

# GitHub (Brain Repository)
GITHUB_TOKEN=                 # Optional, for private repos

# Cron
CRON_SECRET=                  # Authentication for cron job endpoints
```

---

## ğŸš€ HOW TO CONTINUE DEVELOPMENT

### Starting a New Session
1. Share this Master Document with Claude
2. Say what you want to work on
3. Reference the Architecture & File Reference sections

### Adding Ideas
1. Tell Claude: "Add to Pulse ideas: [your idea]"
2. Or add directly to the Ideas Inbox section
3. We'll discuss and refine together

### After Building Features
1. Update the "Completed Features" section
2. Move items from "In Progress" to "Completed"
3. Update File Reference if new files created
4. Add entry to Changelog

### Key Commands
```bash
# Start development server
npm run dev

# If packages missing
npm install

# Check for errors
npm run build
```

---

## ğŸ“ QUICK REFERENCE

### URLs (when running locally/Codespaces)
- Dashboard: `/`
- XP & Skills: `/xp`
- Morning Brief: `/morning`
- Pulse Chat: `/pulse`
- Voice: `/voice`
- Journal: `/journal`
- Pulse AI: `/pulse-ai`
- Follow-Ups: `/follow-ups`
- Email Intelligence: `/email-intelligence`
- Intelligence (Oracle): `/intelligence`
- Notifications: `/notifications`
- Cron Jobs: `/cron`

### Voice System Quick Reference

| State | Face Color | Meaning |
|-------|------------|---------|
| Idle/Neutral | Purple/Indigo | Ready to talk |
| Listening | Green | User is speaking |
| Thinking | Amber | Processing |
| Speaking | Cyan | Pulse is responding |

### XP Categories Quick Reference

| Category | Icon | Tracks |
|----------|------|--------|
| DXP (Discipline) | âš”ï¸ | Habits, tasks, focus, routines |
| PXP (Power) | ğŸ‘‘ | Negotiations, boundaries, leadership |
| IXP (Identity) | ğŸ§¬ | Stoic moments, integrity, growth |
| AXP (Achievement) | ğŸ† | Deals, systems, milestones |
| MXP (Momentum) | ğŸ”¥ | Streaks, consistency, daily wins |

### XP Activity Mapping

| Activity | XP | Category |
|----------|----|---------| 
| habit_completed | 15 | DXP |
| task_completed | 25 | DXP |
| task_completed_high_priority | 40 | DXP |
| journal_entry | 20 | DXP |
| follow_up_sent | 20 | DXP |
| deal_won | 150 | AXP |
| deal_advanced | 50 | AXP |
| streak_milestone_7 | 50 | MXP |
| streak_milestone_14 | 100 | MXP |
| streak_milestone_30 | 200 | MXP |
| morning_routine | 30 | DXP |

### Cron Job Schedule

| Job | Time | Endpoint |
|-----|------|----------|
| Morning Brief | 7:00 AM daily | `/api/cron/morning` |
| Midday Scan | 12:00 PM daily | `/api/cron/daily` |
| Evening Scan | 6:00 PM daily | `/api/cron/daily` |
| Weekly Review | Sunday 6:00 PM | `/api/cron/weekly` |

### Primary Interaction Modes
- Dashboard
- Voice (Pulse Face)
- Chat (/pulse)

### Core Workflow
Capture â†’ Classify â†’ Attach (to people, deals, projects) â†’ Reflect â†’ Act

---

## ğŸ¤– HOW AI TOOLS SHOULD USE THIS DOC

If you are an AI assistant (Claude, ChatGPT, etc.):

1. **Treat this as the source of truth** for:
   - Vision  
   - Architecture  
   - Modules  
   - Roadmap  

2. **Never invent new subsystems** that contradict the Kernel (No-Chore rule, Integration-first, etc.).

3. When asked to implement or extend features:
   - Check if a system already exists (e.g., Confidant, Memory Continuum)  
   - Extend those rather than creating redundant ones  

4. For code changes:
   - Reflect updates back into:
     - Completed Features  
     - Known Issues  
     - File Reference  
     - Changelog  

5. **Respect the Dual-Layer Architecture:**
   - Layer 1 (Integrated Core) = how systems connect internally
   - Layer 2 (Standalone Modules) = how features are exposed to users

6. **Follow the Kernel principles** in all implementations:
   - No-Chore Rule
   - Integration-First
   - Ambient Awareness
   - Calm & Professional
   - Life OS for Everyone
   - Identity & Growth Without Overreach

---

## ğŸ“ CHANGELOG

### v3.1 â€” November 29, 2025
- Added Dual-Layer Architecture (Integrated Core + Standalone Modules)
- Added detailed specs for:
  - Memory Continuum Engine
  - Confidant Module
  - Emotional OS
  - Philosophy Dojo
  - Identity Engine
  - Behavioral Design Layer
  - Professional Work Engines
- Added Table of Contents
- Added "How AI Tools Should Use This Doc" section
- Integrated Life OS vision and far-future roadmap into core structure

### v3.0 â€” November 29, 2025
- Up-leveled to Life OS
- Introduced Kernel (6 core principles)
- Added Personalization Engine
- Added Integration Layer (PIL)
- Added long-term systems (Identity Engine, Destiny Engine, Emotional OS, etc.)
- Cron jobs implemented (morning, midday, evening, weekly)
- XP Log database for persistent tracking
- Dashboard navigation bar added
- Email Intelligence timeout fixed

### v2.2 â€” November 27, 2025
- XP Ascension System implemented
- Proactive Pulse implemented
- Voice system with Pulse Face
- Journal system (3 modes + voice)
- Morning Brief
- Email Intelligence Scanner
- Dashboard v1

### v2.1 â€” November 26, 2025
- Voice & Journal implementation
- Global voice button
- Proactive greetings

### v2.0 â€” November 24, 2025
- Architecture decisions (Notion â†’ GitHub + HubSpot + Supabase plan)
- Relationship Oracle defined

---

*This document is the single source of truth for Pulse OS development.*
*Update it as we build. Reference it at the start of each session.*
